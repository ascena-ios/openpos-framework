<app-waffle [showDrawer]="showDrawer && !screen.template.localMenuAtBottom">
    <app-statusbar waffle-header fxFlex="100%" [data]="statusBar"></app-statusbar>
    <div waffle-drawer-content class="drawer-content" fxFlex="1 1 100%" *ngIf="!screen.template.localMenuAtBottom && localMenuEnabled" fxLayout="column" fxLayoutAlign="start stretch">
        <app-secondary-button *ngFor="let m of template.localMenuItems" (click)="doMenuItemAction(m)"
            [disabled]="!isMenuItemEnabled(m)" class="sell-template-menu-button sausage-link" [actionItem]="m">
            <app-icon *ngIf="m.icon" [iconName]="m.icon"></app-icon>
            <span [ngClass]="{'muted-color': ! m.enabled}" class="sausage-link-button-title">&nbsp;{{m.title}}</span>
            <span fxFlex="1 1 auto" style="padding-right: 8px;"></span>
            <span *ngIf="m.keybind && keybindsEnabled()" class="muted-color">{{m.keybind}}</span>
        </app-secondary-button>
        <div fxFlex="1 1 auto"></div>
        <ng-container *ngIf="!screen.hideCustomer">
            <app-sell-linked-customer [screenType]="screen.screenType" [customerName]="screen.customerName"
                [noCustomerText]="screen.noCustomerText" [loyaltyButton]="screen.loyaltyButton"></app-sell-linked-customer>
        </ng-container>
        <div *ngIf="screen.screenType === 'Transaction'" fxFlex="0 1 auto" class="sell-screen-logo"></div>
    </div>
    <app-scan-something waffle-top-content class="scan-or-search mat-elevation-z3" *ngIf="template.scan"
        [scanSomethingData]="template.scan"></app-scan-something>

    <div waffle-title *ngIf="screen.prompt" class="sale-prompt">
        <span>{{screen.prompt}}</span>
        <app-banner></app-banner> 
    </div>

    <div waffle-body class="sale-content">

        <ng-container *ngIf="screen.subtitle">
            <mat-card-subtitle *ngIf="screen.subtitle?.length == 1" fxFlex="0 0 auto" class="text-md">{{screen.subtitle}}</mat-card-subtitle>
            <div *ngIf="screen.subtitle?.length > 1">
                <div *ngFor="let line of screen.subtitle">
                    <mat-card-subtitle *ngIf="screen.subtitle?.length > 1" fxFlex="0 0 auto" class="text-md">{{line}}</mat-card-subtitle>
                </div>
            </div>
        </ng-container>

        <div style="flex:1 1 50%; min-height: 50%">
            <ng-template appScreen></ng-template>
        </div>

        <mat-card fxLayout="row wrap"  fxFlexAlign="centor"  style="margin:10px 0 5px 0"  *ngIf="(localMenuEnabled && (screen.template.localMenuAtBottom || (screen.template.enableMobileLocalMenu && (smOrXs | async)))) && screen.template.localMenuItems.length > 1 "  >
            <div *ngFor="let tender of screen.template.localMenuItems" style="flex:1 1 25%; min-width:25%">
                <div  (click)="doMenuItemAction(tender)" style="margin:10px 10px 10px 10px;text-align:center;min-width: 160px;" [ngStyle.lt-md]="{'min-width':'90px'}" [ngStyle.gt-sm]="{'min-width':'160px'}">
                    <button fxShow.gt-sm="true" fxShow.lt-md="false" mat-fab >
                        <app-icon *ngIf="tender.icon"  [iconName]="tender.icon" style="padding-top:12px"></app-icon>
                    </button>
                    <button fxShow.gt-sm="false" fxShow.lt-md="true" mat-mini-fab  color=primary-inverse>
                        <app-icon *ngIf="tender.icon"  [iconName]="tender.icon"></app-icon>
                    </button>
                    <div [ngStyle.lt-md]="{'font-size':'11px','padding-top':'10px'}" [ngStyle.gt-sm]="{'font-size':'24px','padding-top':'15px'}">{{tender.title}}</div>
                </div>
            </div>
        </mat-card>
        <div fxLayout="row" style="margin:10px 25px 5px 25px"  *ngIf="(localMenuEnabled && (screen.template.localMenuAtBottom || (screen.template.enableMobileLocalMenu && (smOrXs | async)))) &&screen.template.localMenuItems.length === 1 " fxFlexAlign="flex-end" fxFlexAlign.lt-md="center" >
            <div *ngFor="let tender of screen.template.localMenuItems" fxFlex="1 1 auto">
                <div  (click)="doMenuItemAction(tender)" style="width:auto;text-align:center;">
                    <button fxShow.gt-sm="true" fxShow.lt-md="false" mat-fab style="padding-top:12px">
                        <app-icon *ngIf="tender.icon"  [iconName]="tender.icon"></app-icon>
                    </button>
                    <button fxShow.gt-sm="false" fxShow.lt-md="true" mat-mini-fab  color=primary-inverse>
                        <app-icon *ngIf="tender.icon"  [iconName]="tender.icon"></app-icon>
                    </button>
                    <div [ngStyle.lt-md]="{'font-size':'14px','padding-top':'10px'}" [ngStyle.gt-sm]="{'font-size':'24px','padding-top':'15px'}">{{tender.title}}</div>
                </div>
            </div>
        </div>
        <app-sell-status-section fxFlex="0 1 auto" [data]="statusSection"></app-sell-status-section>

    </div>
</app-waffle>